import{h as e,s as o,H as s,I as n,J as t,K as i,L as r,M as a}from"../nitro/nitro.mjs";import{v as u,u as c}from"./server.mjs";function useRequestEvent(e){return e||=c(),e.ssrContext?.event}const d={path:"/",watch:!0,decode:o=>e(decodeURIComponent(o)),encode:e=>encodeURIComponent("string"==typeof e?e:JSON.stringify(e))};function useCookie(e,f){const v={...d,...f};v.filter??=o=>o===e;const p=function(e={}){return s(n(useRequestEvent(),"cookie")||"",e)}(v)||{};let k;void 0!==v.maxAge?k=1e3*v.maxAge:v.expires&&(k=v.expires.getTime()-Date.now());const m=o(void 0!==k&&k<=0?void 0:p[e]??v.default?.()),l=u.ref(m);{const o=c(),writeFinalCookieValue=()=>{v.readonly||t(l.value,p[e])||(o._cookies||={},e in o._cookies&&t(l.value,o._cookies[e])||(o._cookies[e]=l.value,function(e,o,s,n={}){if(e){if(null!=s)return i(e,o,s,n);if(void 0!==r(e,o))a(e,o,n)}}(useRequestEvent(o),e,l.value,v)))},s=o.hooks.hookOnce("app:rendered",writeFinalCookieValue);o.hooks.hookOnce("app:error",()=>(s(),writeFinalCookieValue()))}return l}export{useCookie as u};
//# sourceMappingURL=cookie-D3WPRoGl.mjs.map
